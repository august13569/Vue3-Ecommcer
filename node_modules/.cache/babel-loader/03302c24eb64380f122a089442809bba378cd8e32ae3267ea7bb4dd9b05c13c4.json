{"ast":null,"code":"export default {\n  data() {\n    return {\n      carts: []\n    };\n  },\n  methods: {\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(url).then(res => {\n        this.carts = res.data.data.carts;\n      });\n    },\n    checkSidebarStatus() {\n      const sidebarElement = this.$refs.offcanvasSidebar;\n      const isSidebarVisible = sidebarElement.classList.contains('show');\n      // 回傳布林值到父層元件\n      this.$emit('sidebarStatus', isSidebarVisible);\n    }\n  },\n  computed: {\n    cartNum() {\n      return this.carts.length;\n    }\n  },\n  inject: ['emitter'],\n  mounted() {\n    this.$emitter.on('update-cart', newCartNum => {\n      this.carts = newCartNum;\n    });\n    this.$refs.offcanvasSidebar.addEventListener('transitionend', this.checkSidebarStatus);\n  },\n  created() {\n    this.getCart();\n  },\n  beforeUnmount() {\n    // 移除事件監聽器，避免記憶體洩漏\n    this.$refs.offcanvasSidebar.removeEventListener('transitionend', this.checkSidebarStatus);\n  }\n};","map":{"version":3,"names":["data","carts","methods","getCart","url","process","env","VUE_APP_API","VUE_APP_PATH","$http","get","then","res","checkSidebarStatus","sidebarElement","$refs","offcanvasSidebar","isSidebarVisible","classList","contains","$emit","computed","cartNum","length","inject","mounted","$emitter","on","newCartNum","addEventListener","created","beforeUnmount","removeEventListener"],"sources":["C:\\Users\\augus\\OneDrive\\桌面\\暫存區\\vue-practice\\brite\\src\\components\\Navbar.vue"],"sourcesContent":["<template>\n  <!-- Navbar -->\n  <nav class=\"navbar navbar-expand-lg sticky-top bg-white shadow\">\n    <div class=\"container\">\n      <!-- Toggle Btn -->\n      <button class=\"navbar-toggler\"\n              type=\"button\"\n              data-bs-toggle=\"offcanvas\"\n              data-bs-target=\"#offcanvasNavbar\"\n              aria-controls=\"offcanvasNavbar\"\n              >\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n      <!-- Logo -->\n      <router-link to=\"/\" class=\"navbar-brand\">\n        <h1 class=\"visually-hidden\">BRITE</h1>\n        <img src=\"~@/assets/img/BRITE Logo.png\" alt=\"BRITE\" width=\"200\" height=\"60\">\n      </router-link>\n      <!-- Sidebar -->\n      <div class=\"offcanvas offcanvas-start\"\n           ref=\"offcanvasSidebar\"\n           tabindex=\"-1\"\n           id=\"offcanvasNavbar\"\n           aria-labelledby=\"offcanvasNavbarLabel\"\n           data-bs-dismiss=\"offcanvas\"\n           >\n        <!-- Sidebar Header -->\n        <div class=\"offcanvas-header d-flex justify-content-end d-lg-none\">\n          <button class=\"btn-close text-reset\"\n                  type=\"button\"\n                  data-bs-dismiss=\"offcanvas\"\n                  aria-label=\"Close\"></button>\n        </div>\n        <!-- Sidebar Body -->\n        <div class=\"offcanvas-body\">\n          <ul class=\"navbar-nav justify-content-center flex-grow-1 pe-3\">\n            <li class=\"nav-item px-2\">\n              <router-link to=\"/\" class=\"nav-link link-secondary\"\n              hide.bs.offcanvas=\"offcanvas\">Home</router-link>\n            </li>\n            <li class=\"nav-item px-2\">\n              <router-link to=\"/about\" class=\"nav-link link-secondary\">About</router-link>\n            </li>\n            <li class=\"nav-item px-2\">\n              <router-link to=\"/products\" class=\"nav-link link-secondary\">Products</router-link>\n            </li>\n            <li class=\"nav-item px-2\">\n              <router-link to=\"/faq\" class=\"nav-link link-secondary\">FAQ</router-link>\n            </li>\n            <li class=\"nav-item px-2\">\n              <router-link to=\"/contact\" class=\"nav-link link-secondary\">Contact</router-link>\n            </li>\n          </ul>\n        </div>\n      </div>\n      <!-- Login / Shopping Cart -->\n      <div class=\"d-flex\">\n        <i class=\"bi bi-person-fill text-secondary fs-3 px-2\"></i>\n        <div class=\"position-relative align-self-center\">\n          <router-link to=\"/cart\" class=\"fs-5 px-2\">\n            <i class=\"bi bi-bag-fill text-secondary\"></i>\n          </router-link>\n          <span class=\"position-absolute top-0 start-100 translate-middle\n                       badge rounded-pill bg-danger\"\n                v-if=\"carts.length > 0\"\n                       >\n                       {{ cartNum }}\n            <span class=\"visually-hidden\">unread messages</span>\n          </span>\n        </div>\n      </div>\n    </div>\n  </nav>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      carts: [],\n    };\n  },\n  methods: {\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(url).then((res) => {\n        this.carts = res.data.data.carts;\n      });\n    },\n    checkSidebarStatus() {\n      const sidebarElement = this.$refs.offcanvasSidebar;\n      const isSidebarVisible = sidebarElement.classList.contains('show');\n      // 回傳布林值到父層元件\n      this.$emit('sidebarStatus', isSidebarVisible);\n    },\n  },\n  computed: {\n    cartNum() {\n      return this.carts.length;\n    },\n  },\n  inject: ['emitter'],\n  mounted() {\n    this.$emitter.on('update-cart', (newCartNum) => {\n      this.carts = newCartNum;\n    });\n    this.$refs.offcanvasSidebar.addEventListener('transitionend', this.checkSidebarStatus);\n  },\n  created() {\n    this.getCart();\n  },\n  beforeUnmount() {\n    // 移除事件監聽器，避免記憶體洩漏\n    this.$refs.offcanvasSidebar.removeEventListener('transitionend', this.checkSidebarStatus);\n  },\n};\n</script>\n"],"mappings":"AA4EA,eAAe;EACbA,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE;IACT,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,OAAOA,CAAA,EAAG;MACR,MAAMC,GAAE,GAAK,GAAEC,OAAO,CAACC,GAAG,CAACC,WAAY,OAAMF,OAAO,CAACC,GAAG,CAACE,YAAa,OAAM;MAC5E,IAAI,CAACC,KAAK,CAACC,GAAG,CAACN,GAAG,CAAC,CAACO,IAAI,CAAEC,GAAG,IAAK;QAChC,IAAI,CAACX,KAAI,GAAIW,GAAG,CAACZ,IAAI,CAACA,IAAI,CAACC,KAAK;MAClC,CAAC,CAAC;IACJ,CAAC;IACDY,kBAAkBA,CAAA,EAAG;MACnB,MAAMC,cAAa,GAAI,IAAI,CAACC,KAAK,CAACC,gBAAgB;MAClD,MAAMC,gBAAe,GAAIH,cAAc,CAACI,SAAS,CAACC,QAAQ,CAAC,MAAM,CAAC;MAClE;MACA,IAAI,CAACC,KAAK,CAAC,eAAe,EAAEH,gBAAgB,CAAC;IAC/C;EACF,CAAC;EACDI,QAAQ,EAAE;IACRC,OAAOA,CAAA,EAAG;MACR,OAAO,IAAI,CAACrB,KAAK,CAACsB,MAAM;IAC1B;EACF,CAAC;EACDC,MAAM,EAAE,CAAC,SAAS,CAAC;EACnBC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,QAAQ,CAACC,EAAE,CAAC,aAAa,EAAGC,UAAU,IAAK;MAC9C,IAAI,CAAC3B,KAAI,GAAI2B,UAAU;IACzB,CAAC,CAAC;IACF,IAAI,CAACb,KAAK,CAACC,gBAAgB,CAACa,gBAAgB,CAAC,eAAe,EAAE,IAAI,CAAChB,kBAAkB,CAAC;EACxF,CAAC;EACDiB,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC3B,OAAO,CAAC,CAAC;EAChB,CAAC;EACD4B,aAAaA,CAAA,EAAG;IACd;IACA,IAAI,CAAChB,KAAK,CAACC,gBAAgB,CAACgB,mBAAmB,CAAC,eAAe,EAAE,IAAI,CAACnB,kBAAkB,CAAC;EAC3F;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}