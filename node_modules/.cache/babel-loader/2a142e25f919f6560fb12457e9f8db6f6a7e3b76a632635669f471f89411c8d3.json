{"ast":null,"code":"import modalMixin from '@/mixins/modalMixin';\nexport default {\n  props: {\n    product: {\n      type: Object,\n      default() {\n        return {};\n      }\n    }\n  },\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n    }\n  },\n  data() {\n    return {\n      modal: {},\n      tempProduct: {}\n    };\n  },\n  methods: {\n    uploadFile() {\n      const uploadedFile = this.$refs.fileInput.files[0];\n      const formData = new FormData();\n      formData.append('file-to-upload', uploadedFile);\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`;\n      this.$http.post(url, formData).then(res => {\n        console.log(res.data);\n        if (res.data.success) {\n          this.tempProduct.imageUrl = res.data.imageUrl;\n        }\n      });\n    }\n  },\n  mixins: [modalMixin]\n};","map":{"version":3,"names":["modalMixin","props","product","type","Object","default","watch","tempProduct","data","modal","methods","uploadFile","uploadedFile","$refs","fileInput","files","formData","FormData","append","url","process","env","VUE_APP_API","VUE_APP_PATH","$http","post","then","res","console","log","success","imageUrl","mixins"],"sources":["C:\\Users\\augus\\OneDrive\\桌面\\暫存區\\vue-practice\\brite\\src\\components\\ProductModal.vue"],"sourcesContent":["<template>\n  <div\n    class=\"modal fade\"\n    id=\"exampleModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span>新增產品</span>\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-sm-4\">\n              <div class=\"mb-3\">\n                <label for=\"image\" class=\"form-label w-100\">\n                  輸入圖片網址\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"image\"\n                    v-model=\"tempProduct.imageUrl\"\n                    placeholder=\"請輸入圖片連結\"\n                  />\n                </label>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"customFile\" class=\"form-label w-100\"\n                    >上傳圖片\n                    <i class=\"fas fa-spinner fa-spin\"></i>\n                  <input\n                    type=\"file\"\n                    id=\"customFile\"\n                    class=\"form-control\"\n                    ref=\"fileInput\"\n                    @change=\"uploadFile\"\n                  />\n                </label>\n              </div>\n              <img class=\"img-fluid\" :src=\"tempProduct.imageUrl\" alt=\"\" />\n              <!-- 延伸技巧，多圖 -->\n              <div class=\"mt-5\" v-if=\"tempProduct.images\">\n                <div class=\"mb-3 input-group\"\n                     v-for=\"(image, key) in tempProduct.images\" :key=\"key\">\n                  <input\n                    type=\"url\"\n                    class=\"form-control form-control\"\n                    v-model=\"tempProduct.images[key]\"\n                    placeholder=\"請輸入連結\"\n                  />\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-outline-danger\"\n                    @click=\"tempProduct.images.splice(key, 1)\"\n                  >\n                    移除\n                  </button>\n                </div>\n                <div\n                  v-if=\"\n                  tempProduct.images[tempProduct.images.length - 1] || !tempProduct.images.length\n                  \"\n                >\n                  <button\n                    class=\"btn btn-outline-primary btn-sm d-block w-100\"\n                    @click=\"tempProduct.images.push('')\"\n                  >\n                    新增圖片\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div class=\"col-sm-8\">\n              <div class=\"mb-3\">\n                <label for=\"title\" class=\"form-label w-100\">標題\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"title\"\n                    v-model=\"tempProduct.title\"\n                    placeholder=\"請輸入標題\"\n                  />\n                </label>\n              </div>\n              <div class=\"row gx-2\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"category\" class=\"form-label w-100\">分類\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"category\"\n                      v-model=\"tempProduct.category\"\n                      placeholder=\"請輸入分類\"\n                    />\n                  </label>\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"price\" class=\"form-label w-100\">單位\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"unit\"\n                      v-model=\"tempProduct.unit\"\n                      placeholder=\"請輸入單位\"\n                    />\n                  </label>\n                </div>\n              </div>\n              <div class=\"row gx-2\">\n                <div class=\"mb-3 col-md-4\">\n                  <label for=\"origin_price\" class=\"form-label w-100\">原價\n                    <input\n                      type=\"number\"\n                      class=\"form-control\"\n                      id=\"origin_price\"\n                      v-model.number=\"tempProduct.origin_price\"\n                      placeholder=\"請輸入原價\"\n                    />\n                  </label>\n                </div>\n                <div class=\"mb-3 col-md-4\">\n                  <label for=\"price\" class=\"form-label w-100\">售價\n                    <input\n                      type=\"number\"\n                      class=\"form-control\"\n                      id=\"price\"\n                      v-model.number=\"tempProduct.price\"\n                      placeholder=\"請輸入售價\"\n                    />\n                  </label>\n                </div>\n                <div class=\"mb-3 col-md-4\">\n                  <label for=\"price\" class=\"form-label w-100\">庫存\n                    <input\n                      type=\"number\"\n                      class=\"form-control\"\n                      id=\"is_enabled\"\n                      v-model.number=\"tempProduct.is_enabled\"\n                      placeholder=\"請輸入庫存量\"\n                    />\n                  </label>\n                </div>\n              </div>\n              <hr />\n              <div class=\"mb-3\">\n                <label for=\"description\" class=\"form-label w-100\">產品描述\n                  <textarea\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"description\"\n                    v-model=\"tempProduct.description\"\n                    placeholder=\"請輸入產品描述\"\n                  ></textarea>\n                </label>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"content\" class=\"form-label w-100\">說明內容\n                  <textarea\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"content\"\n                    v-model=\"tempProduct.content\"\n                    placeholder=\"請輸入產品說明內容\"\n                  ></textarea>\n                </label>\n              </div>\n              <div class=\"mb-3\">\n                <div class=\"form-check\">\n                  <label class=\"form-check-label\" for=\"is_enabled\">\n                    是否啟用\n                    <input\n                      class=\"form-check-input\"\n                      type=\"checkbox\"\n                      v-model=\"tempProduct.is_enabled\"\n                      :true-value=\"1\"\n                      :false-value=\"0\"\n                      id=\"is_enabled\"\n                    />\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-outline-secondary\" data-bs-dismiss=\"modal\">\n            取消\n          </button>\n          <button\n            type=\"button\"\n            class=\"btn btn-primary\"\n            @click=\"$emit('update-product', tempProduct)\"\n          >\n            確認\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  props: {\n    product: {\n      type: Object,\n      default() { return {}; },\n    },\n  },\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n    },\n  },\n  data() {\n    return {\n      modal: {},\n      tempProduct: {},\n    };\n  },\n  methods: {\n    uploadFile() {\n      const uploadedFile = this.$refs.fileInput.files[0];\n      const formData = new FormData();\n      formData.append('file-to-upload', uploadedFile);\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`;\n      this.$http.post(url, formData)\n        .then((res) => {\n          console.log(res.data);\n          if (res.data.success) {\n            this.tempProduct.imageUrl = res.data.imageUrl;\n          }\n        });\n    },\n  },\n  mixins: [modalMixin],\n};\n</script>\n"],"mappings":"AAqNA,OAAOA,UAAS,MAAO,qBAAqB;AAE5C,eAAe;EACbC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,MAAM;MACZC,OAAOA,CAAA,EAAG;QAAE,OAAO,CAAC,CAAC;MAAE;IACzB;EACF,CAAC;EACDC,KAAK,EAAE;IACLJ,OAAOA,CAAA,EAAG;MACR,IAAI,CAACK,WAAU,GAAI,IAAI,CAACL,OAAO;IACjC;EACF,CAAC;EACDM,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,CAAC,CAAC;MACTF,WAAW,EAAE,CAAC;IAChB,CAAC;EACH,CAAC;EACDG,OAAO,EAAE;IACPC,UAAUA,CAAA,EAAG;MACX,MAAMC,YAAW,GAAI,IAAI,CAACC,KAAK,CAACC,SAAS,CAACC,KAAK,CAAC,CAAC,CAAC;MAClD,MAAMC,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,gBAAgB,EAAEN,YAAY,CAAC;MAC/C,MAAMO,GAAE,GAAK,GAAEC,OAAO,CAACC,GAAG,CAACC,WAAY,OAAMF,OAAO,CAACC,GAAG,CAACE,YAAa,eAAc;MACpF,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,GAAG,EAAEH,QAAQ,EAC1BU,IAAI,CAAEC,GAAG,IAAK;QACbC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACnB,IAAI,CAAC;QACrB,IAAImB,GAAG,CAACnB,IAAI,CAACsB,OAAO,EAAE;UACpB,IAAI,CAACvB,WAAW,CAACwB,QAAO,GAAIJ,GAAG,CAACnB,IAAI,CAACuB,QAAQ;QAC/C;MACF,CAAC,CAAC;IACN;EACF,CAAC;EACDC,MAAM,EAAE,CAAChC,UAAU;AACrB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}