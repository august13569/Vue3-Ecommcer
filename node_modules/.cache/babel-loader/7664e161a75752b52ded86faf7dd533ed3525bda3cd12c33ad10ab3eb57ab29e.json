{"ast":null,"code":"import Navbar from '@/components/Navbar.vue';\nimport Footer from '@/components/Footer.vue';\nimport ProductList from '@/components/HorizontalProductList.vue';\nexport default {\n  components: {\n    Navbar,\n    Footer,\n    ProductList\n  },\n  data() {\n    return {\n      title: 'Related',\n      allProducts: [],\n      product: {},\n      id: '',\n      quantity: 1,\n      status: {\n        loadingItem: ''\n      }\n    };\n  },\n  methods: {\n    getAllProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      this.$http.get(url).then(res => {\n        this.allProducts = res.data.products;\n        this.isLoading = false;\n      });\n    },\n    getProduct() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.id}`;\n      this.isLoading = true;\n      this.$http.get(api).then(res => {\n        this.isLoading = false;\n        if (res.data.success) {\n          this.product = res.data.product;\n        }\n      });\n    },\n    updateQuantity(action) {\n      if (action === 'plus' && this.quantity < this.product.is_enabled) {\n        this.quantity += 1;\n      } else if (action === 'minus' && this.quantity > 1) {\n        this.quantity -= 1;\n      }\n    },\n    addCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.status.loadingItem = id;\n      const cart = {\n        product_id: id,\n        qty: this.quantity\n      };\n      this.$http.post(url, {\n        data: cart\n      }).then(res => {\n        this.status.loadingItem = '';\n        console.log(res);\n      });\n    }\n  },\n  created() {\n    this.id = this.$route.params.productId;\n    this.getAllProducts();\n    this.getProduct();\n  }\n};","map":{"version":3,"names":["Navbar","Footer","ProductList","components","data","title","allProducts","product","id","quantity","status","loadingItem","methods","getAllProducts","url","process","env","VUE_APP_API","VUE_APP_PATH","isLoading","$http","get","then","res","products","getProduct","api","success","updateQuantity","action","is_enabled","addCart","cart","product_id","qty","post","console","log","created","$route","params","productId"],"sources":["C:\\Users\\augus\\OneDrive\\桌面\\暫存區\\vue-practice\\brite\\src\\views\\front\\TheProduct.vue"],"sourcesContent":["<!-- 當使用者加入購物車時，要扣除庫存的數量，這樣才不會購買數量＞庫存 -->\n<!-- 當數量為0的時候，不能讓使用者加入購物車 -->\n<template>\n  <router-view></router-view>\n  <Loading :active=\"isLoading\"></Loading>\n  <Navbar></Navbar>\n  <div class=\"container\">\n    <!-- The product information -->\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <img :src=\"product.imageUrl\" alt=\"\" class=\"w-100 h-100\">\n      </div>\n      <div class=\"col-md-6 d-flex flex-column justify-content-center\">\n        <h2>{{ product.title }}</h2>\n        <ul>\n          <li>Type: {{ product.category }}</li>\n          <li>Available: {{ product.is_enabled }}</li>\n          <li>Color: {{ product.unit }}</li>\n        </ul>\n        <div class=\"d-flex\">\n          <p class=\"text-primary fs-3 px-1\">${{ $filters.currency(product.price) }}</p>\n          <p class=\"text-secondary text-decoration-line-through fs-5 px-1 pt-md-2\">\n            ${{ $filters.currency(product.origin_price) }}\n          </p>\n        </div>\n        <span class=\"text-danger\" v-if=\"this.quantity === this.product.is_enabled\">\n          You've reached the maximum quantity available for this item\n        </span>\n        <div>\n          <label for=\"buyqant\">Quantity:</label>\n          <button class=\"btn\" @click.prevent=\"updateQuantity('minus')\">\n            <i class=\"bi bi-dash-circle-fill link-primary fs-4\"></i>\n          </button>\n          <input class=\"q-input\"\n                 type=\"number\"\n                 name=\"buyqant\"\n                 id=\"buyqant\"\n                 value=\"1\"\n                 min=\"1\"\n                 v-model.number=\"quantity\"\n                 >\n          <button class=\"btn\" @click.prevent=\"updateQuantity('plus')\">\n            <i class=\"bi bi-plus-circle-fill link-primary fs-4\"></i>\n          </button>\n        </div>\n        <div>\n          <button type=\"button\" class=\"btn btn-outline-primary\">Buy</button>\n          <button type=\"button\" class=\"btn btn-outline-danger position-relative\"\n                  :disabled=\"this.status.loadingItem === product.id\"\n                  @click.prevent=\"addCart(product.id)\"\n                  >\n                  <div class=\"position-absolute top-50 start-50 translate-middle\">\n                    <div class=\"spinner-border spinner-border-sm text-danger\"\n                         role=\"status\"\n                         v-if=\"this.status.loadingItem === product.id\"\n                         >\n                    </div>\n                  </div>\n                  <span :class=\"{'text-white': this.status.loadingItem === product.id}\">\n                    Add to Cart\n                  </span>\n                  </button>\n        </div>\n      </div>\n      <!-- The product introduction -->\n      <div class=\"col-12\">\n        <ul class=\"nav nav-underline mb-3\" id=\"pills-tab\" role=\"tablist\">\n          <li class=\"nav-item\" role=\"presentation\">\n            <button class=\"nav-link active\"\n                    id=\"pills-home-tab\"\n                    data-bs-toggle=\"pill\"\n                    data-bs-target=\"#pills-home\"\n                    type=\"button\"\n                    role=\"tab\"\n                    aria-controls=\"pills-home\"\n                    aria-selected=\"true\"\n                    >\n                    Home</button>\n          </li>\n          <li class=\"nav-item\" role=\"presentation\">\n            <button class=\"nav-link\"\n                    id=\"pills-profile-tab\"\n                    data-bs-toggle=\"pill\"\n                    data-bs-target=\"#pills-profile\"\n                    type=\"button\"\n                    role=\"tab\"\n                    aria-controls=\"pills-profile\"\n                    aria-selected=\"false\"\n                    >\n                    Profile</button>\n          </li>\n          <li class=\"nav-item\" role=\"presentation\">\n            <button class=\"nav-link\"\n                    id=\"pills-contact-tab\"\n                    data-bs-toggle=\"pill\"\n                    data-bs-target=\"#pills-contact\"\n                    type=\"button\"\n                    role=\"tab\"\n                    aria-controls=\"pills-contact\"\n                    aria-selected=\"false\"\n                    >\n                    Contact</button>\n          </li>\n        </ul>\n        <div class=\"tab-content\" id=\"pills-tabContent\">\n          <div class=\"tab-pane fade show text-secondary active\"\n               id=\"pills-home\"\n               role=\"tabpanel\"\n               aria-labelledby=\"pills-home-tab\"\n               tabindex=\"0\"\n               >\n               Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur cupiditate\n                necessitatibus voluptatibus odio molestias quis, porro minus corrupti,\n                quibusdam dolore praesentium reiciendis fugiat eius voluptas delectus\n                  adipisci vel tempore vero.\n                </div>\n          <div class=\"tab-pane fade text-secondary\"\n               id=\"pills-profile\"\n               role=\"tabpanel\"\n               aria-labelledby=\"pills-profile-tab\"\n               tabindex=\"0\"\n               >\n               Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur cupiditate\n                necessitatibus voluptatibus odio molestias quis, porro minus corrupti,\n                quibusdam dolore praesentium reiciendis fugiat eius voluptas delectus\n                  adipisci vel tempore vero.\n                </div>\n          <div class=\"tab-pane fade text-secondary\"\n               id=\"pills-contact\"\n               role=\"tabpanel\"\n               aria-labelledby=\"pills-contact-tab\"\n               tabindex=\"0\"\n               >\n               Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur cupiditate\n                necessitatibus voluptatibus odio molestias quis, porro minus corrupti,\n                quibusdam dolore praesentium reiciendis fugiat eius voluptas delectus\n                  adipisci vel tempore vero.\n                </div>\n        </div>\n      </div>\n      <!-- Related Products -->\n      <section>\n      <ProductList :allProducts=\"allProducts\" :title=\"title\"></ProductList>\n      </section>\n    </div>\n  </div>\n  <Footer></Footer>\n</template>\n\n<script>\nimport Navbar from '@/components/Navbar.vue';\nimport Footer from '@/components/Footer.vue';\nimport ProductList from '@/components/HorizontalProductList.vue';\n\nexport default {\n  components: {\n    Navbar,\n    Footer,\n    ProductList,\n  },\n  data() {\n    return {\n      title: 'Related',\n      allProducts: [],\n      product: {},\n      id: '',\n      quantity: 1,\n      status: {\n        loadingItem: '',\n      },\n    };\n  },\n  methods: {\n    getAllProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      this.$http.get(url)\n        .then((res) => {\n          this.allProducts = res.data.products;\n          this.isLoading = false;\n        });\n    },\n    getProduct() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.id}`;\n      this.isLoading = true;\n      this.$http.get(api).then((res) => {\n        this.isLoading = false;\n        if (res.data.success) {\n          this.product = res.data.product;\n        }\n      });\n    },\n    updateQuantity(action) {\n      if (action === 'plus' && this.quantity < this.product.is_enabled) {\n        this.quantity += 1;\n      } else if (action === 'minus' && this.quantity > 1) {\n        this.quantity -= 1;\n      }\n    },\n    addCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.status.loadingItem = id;\n      const cart = {\n        product_id: id,\n        qty: this.quantity,\n      };\n      this.$http.post(url, { data: cart })\n        .then((res) => {\n          this.status.loadingItem = '';\n          console.log(res);\n        });\n    },\n  },\n  created() {\n    this.id = this.$route.params.productId;\n    this.getAllProducts();\n    this.getProduct();\n  },\n};\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}