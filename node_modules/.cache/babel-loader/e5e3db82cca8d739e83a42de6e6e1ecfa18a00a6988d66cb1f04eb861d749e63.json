{"ast":null,"code":"import Navbar from '@/components/Navbar.vue';\nimport Footer from '@/components/Footer.vue';\nexport default {\n  components: {\n    Navbar,\n    Footer\n  },\n  data() {\n    return {\n      status: {\n        loadingItem: ''\n      },\n      isLoading: false,\n      cart: {}\n    };\n  },\n  methods: {\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url).then(res => {\n        console.log(res);\n        this.cart = res.data.data;\n        this.isLoading = false;\n      });\n    },\n    updateQuantity(action, item) {\n      this.status.loadingItem = item.id;\n      const matchItems = this.cart.carts.filter(order => order.id === item.id);\n      matchItems.forEach(product => {\n        if (action === 'plus' && product.qty < product.product.is_enabled) {\n          product.qty += 1;\n          this.updateCart(item);\n        } else if (action === 'minus' && product.qty > 1) {\n          product.qty -= 1;\n          this.updateCart(item);\n        } else {\n          this.status.loadingItem = '';\n        }\n      });\n    },\n    updateCart(item) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      const cart = {\n        product_id: item.product_id,\n        qty: item.qty\n      };\n      this.$http.put(url, {\n        data: cart\n      }).then(res => {\n        console.log(res);\n        this.status.loadingItem = '';\n        this.getCart();\n      });\n    },\n    removeCartItem(id) {\n      this.status.loadingItem = id;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.$http.delete(url).then(res => {\n        console.log(res);\n        this.getCart();\n      });\n    }\n  },\n  created() {\n    this.getCart();\n  }\n};","map":{"version":3,"names":["Navbar","Footer","components","data","status","loadingItem","isLoading","cart","methods","getCart","url","process","env","VUE_APP_API","VUE_APP_PATH","$http","get","then","res","console","log","updateQuantity","action","item","id","matchItems","carts","filter","order","forEach","product","qty","is_enabled","updateCart","product_id","put","removeCartItem","delete","created"],"sources":["C:\\Users\\augus\\OneDrive\\桌面\\暫存區\\vue-practice\\brite\\src\\views\\front\\ShoppingCart.vue"],"sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <Navbar></Navbar>\n  <!-- Steps bar -->\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-lg-8 offset-lg-2 col-10 offset-1\">\n        <div class=\"position-relative\">\n          <div class=\"d-flex justify-content-between\">\n            <div class=\"d-flex flex-column w-25 align-items-center\">\n              <i class=\"bi bi-1-circle fs-2 text-primary bg-white\"></i>\n              <span>Cart</span>\n            </div>\n            <div class=\"d-flex flex-column w-25 align-items-center\">\n              <i class=\"bi bi-2-circle fs-2 text-white-50 bg-white\"></i>\n              <span>Order</span>\n            </div>\n            <div class=\"d-flex flex-column w-25 align-items-center\">\n              <i class=\"bi bi-3-circle fs-2 text-white-50 bg-white\"></i>\n              <span>Checkout</span>\n            </div>\n          </div>\n          <div class=\"progress position-absolute translate-middle w-75\"\n               style=\"z-index: -1; height: 0.125rem; top: 33%; left: 50%;\">\n          <div class=\"progress-bar\"\n               role=\"progressbar\"\n               style=\"width: 0%;\"\n               aria-valuenow=\"0\"\n               aria-valuemin=\"0\"\n               aria-valuemax=\"100\"\n               ></div>\n        </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- Shopping cart list -->\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col\">\n        <div class=\"table-responsive border rounded\">\n          <table class=\"table align-middle text-center mb-0\">\n            <thead>\n              <tr class=\"text-center\">\n                <th>Product</th>\n                <th>Name</th>\n                <th>Price</th>\n                <th>Quantity</th>\n                <th>Total</th>\n                <th>Delete</th>\n              </tr>\n            </thead>\n            <tbody>\n              <template v-if=\"cart.carts\">\n                <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                  <td>\n                    <img :src=\"`${item.product.imageUrl}`\" class=\"rounded\" alt=\"...\"\n                         style=\"max-width: 5rem;\">\n                  </td>\n                  <td>{{ item.product.title }}</td>\n                  <td>${{ $filters.currency(item.product.price) }}</td>\n                  <td>\n                    <label for=\"buyqant\" class=\"d-inline-flex\">\n                      <button class=\"btn\"\n                              @click.prevent=\"updateQuantity('minus', item)\"\n                              :disabled=\"item.id === status.loadingItem\"\n                              >\n                        <i class=\"bi bi-dash-circle-fill link-primary fs-4\"></i>\n                      </button>\n                      <input class=\"q-input\"\n                             type=\"number\"\n                             name=\"buyqant\"\n                             id=\"buyqant\"\n                             value=\"0\"\n                             min=\"1\"\n                             v-model.number=\"item.qty\"\n                             :disabled=\"item.id === status.loadingItem\"\n                             >\n                      <button class=\"btn\"\n                              @click.prevent=\"updateQuantity('plus', item)\"\n                              :disabled=\"item.id === status.loadingItem\"\n                              >\n                        <i class=\"bi bi-plus-circle-fill link-primary fs-4\"></i>\n                      </button>\n                    </label>\n                  </td>\n                  <td>${{ $filters.currency(item.product.price * item.qty) }}</td>\n                  <td>\n                    <button type=\"button\" class=\"btn\"\n                            :disabled=\"status.loadingItem === item.id\"\n                            @click=\"removeCartItem(item.id)\"\n                            >\n                      <i class=\"bi bi-trash link-danger fs-5\"></i>\n                    </button>\n                  </td>\n                </tr>\n              </template>\n            </tbody>\n            <tfoot class=\"border-white\">\n              <tr>\n                <th colspan=\"3\">\n                  <input type=\"text\"\n                         class=\"form-control\"\n                         aria-label=\"text\"\n                         v-model=\"coupon_code\"\n                         placeholder=\"Please enter coupon code\"\n                         >\n                </th>\n                <td colspan=\"1\">\n                  <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"addCouponCode\">\n                    Apply\n                  </button>\n                </td>\n                <td>Total: ${{ $filters.currency(cart.total) }}</td>\n                <td>Discount: ${{ $filters.currency(cart.final_total) }}</td>\n              </tr>\n            </tfoot>\n          </table>\n        </div>\n        <!-- Proceed buttons -->\n        <div class=\"d-flex justify-content-around\">\n          <router-link to=\"/products\">\n            <button class=\"btn btn-secondary\" type=\"button\">Back to Shopping</button>\n          </router-link>\n          <router-link to=\"/order\">\n            <button class=\"btn btn-primary\" type=\"button\">Next Step</button>\n          </router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n  <Footer></Footer>\n</template>\n\n<script>\nimport Navbar from '@/components/Navbar.vue';\nimport Footer from '@/components/Footer.vue';\n\nexport default {\n  components: {\n    Navbar,\n    Footer,\n  },\n  data() {\n    return {\n      status: {\n        loadingItem: '',\n      },\n      isLoading: false,\n      cart: {},\n    };\n  },\n  methods: {\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url).then((res) => {\n        console.log(res);\n        this.cart = res.data.data;\n        this.isLoading = false;\n      });\n    },\n    updateQuantity(action, item) {\n      this.status.loadingItem = item.id;\n      const matchItems = this.cart.carts.filter((order) => order.id === item.id);\n      matchItems.forEach((product) => {\n        if (action === 'plus' && product.qty < product.product.is_enabled) {\n          product.qty += 1;\n          this.updateCart(item);\n        } else if (action === 'minus' && product.qty > 1) {\n          product.qty -= 1;\n          this.updateCart(item);\n        } else {\n          this.status.loadingItem = '';\n        }\n      });\n    },\n    updateCart(item) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      const cart = {\n        product_id: item.product_id,\n        qty: item.qty,\n      };\n      this.$http.put(url, { data: cart })\n        .then((res) => {\n          console.log(res);\n          this.status.loadingItem = '';\n          this.getCart();\n        });\n    },\n    removeCartItem(id) {\n      this.status.loadingItem = id;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.$http.delete(url)\n        .then((res) => {\n          console.log(res);\n          this.getCart();\n        });\n    },\n  },\n  created() {\n    this.getCart();\n  },\n};\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}