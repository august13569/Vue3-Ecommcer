{"ast":null,"code":"import ProductModal from '@/components/ProductModal.vue';\nexport default {\n  components: {\n    ProductModal\n  },\n  data() {\n    return {\n      products: [],\n      pagination: {},\n      tempProduct: {},\n      isLoading: false\n    };\n  },\n  methods: {\n    getProducts(page = 1) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products/?page=${page}`;\n      this.isLoading = true;\n      this.$http.get(api).then(res => {\n        this.isLoading = false;\n        if (res.data.success) {\n          console.log(res.data);\n          this.products = res.data.products;\n          this.pagination = res.data.pagination;\n        }\n      });\n    },\n    openModal() {\n      this.tempProduct = {};\n      const productComponent = this.$refs.productModal;\n      productComponent.showModal();\n    },\n    updateProduct(item) {\n      this.tempProduct = item;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products/`;\n      const productComponent = this.$refs.productModal;\n      this.$http.post(api, {\n        data: this.tempProduct\n      }).then(res => {\n        console.log(res);\n        productComponent.hideModal();\n        this.getProducts();\n      });\n    }\n  },\n  created() {\n    this.getProducts();\n  }\n};","map":{"version":3,"names":["ProductModal","components","data","products","pagination","tempProduct","isLoading","methods","getProducts","page","api","process","env","VUE_APP_API","VUE_APP_PATH","$http","get","then","res","success","console","log","openModal","productComponent","$refs","productModal","showModal","updateProduct","item","post","hideModal","created"],"sources":["C:\\Users\\augus\\OneDrive\\桌面\\暫存區\\vue-practice\\brite\\src\\views\\back\\Products.vue"],"sourcesContent":["<template>\n  <pageLoading :active=\"isLoading\"></pageLoading>\n  <div class=\"text-end\">\n    <button class=\"btn btn-primary text-white\"\n            type=\"button\"\n            @click=\"$refs.productModal.showModal()\"\n            >增加一個產品</button>\n  </div>\n  <table class=\"table mt-4\">\n    <thead>\n      <tr>\n        <th width=\"120\">分類</th>\n        <th>產品名稱</th>\n        <th width=\"120\">原價</th>\n        <th width=\"120\">售價</th>\n        <th width=\"120\">庫存</th>\n        <th width=\"100\">是否啟用</th>\n        <th width=\"200\">編輯</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"item in products\" :key=\"item.id\">\n        <td>{{ item.category}}</td>\n        <td>{{ item.title }}</td>\n        <td class=\"text-right\">\n          {{ $filters.currency(item.origin_price) }}\n        </td>\n        <td class=\"text-right\">\n          {{ $filters.currency(item.price) }}\n        </td>\n        <td class=\"text-right\">\n          {{ $filters.currency(item.is_enabled) }}\n        </td>\n        <td>\n          <span class=\"text-success\" v-if=\"item.is_enabled\">啟用</span>\n          <span class=\"text-muted\" v-else>未啟用</span>\n        </td>\n        <td>\n          <div class=\"btn-group\">\n            <button class=\"btn btn-outline-primary btn-sm\"\n                    @click=\"openModal(false, item)\">編輯</button>\n            <button class=\"btn btn-outline-danger btn-sm\"\n                    @click=\"openDelProductModal(item)\">刪除</button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <ProductModal\n    ref=\"productModal\" :product=\"tempProduct\" @update-product=\"updateProduct\">\n  </ProductModal>\n</template>\n\n<script>\nimport ProductModal from '@/components/ProductModal.vue';\n\nexport default {\n  components: {\n    ProductModal,\n  },\n  data() {\n    return {\n      products: [],\n      pagination: {},\n      tempProduct: {},\n      isLoading: false,\n    };\n  },\n  methods: {\n    getProducts(page = 1) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products/?page=${page}`;\n      this.isLoading = true;\n      this.$http.get(api)\n        .then((res) => {\n          this.isLoading = false;\n          if (res.data.success) {\n            console.log(res.data);\n            this.products = res.data.products;\n            this.pagination = res.data.pagination;\n          }\n        });\n    },\n    openModal() {\n      this.tempProduct = {};\n      const productComponent = this.$refs.productModal;\n      productComponent.showModal();\n    },\n    updateProduct(item) {\n      this.tempProduct = item;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products/`;\n      const productComponent = this.$refs.productModal;\n      this.$http.post(api, { data: this.tempProduct })\n        .then((res) => {\n          console.log(res);\n          productComponent.hideModal();\n          this.getProducts();\n        });\n    },\n  },\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n"],"mappings":"AAsDA,OAAOA,YAAW,MAAO,+BAA+B;AAExD,eAAe;EACbC,UAAU,EAAE;IACVD;EACF,CAAC;EACDE,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,UAAU,EAAE,CAAC,CAAC;MACdC,WAAW,EAAE,CAAC,CAAC;MACfC,SAAS,EAAE;IACb,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,WAAWA,CAACC,IAAG,GAAI,CAAC,EAAE;MACpB,MAAMC,GAAE,GAAK,GAAEC,OAAO,CAACC,GAAG,CAACC,WAAY,OAAMF,OAAO,CAACC,GAAG,CAACE,YAAa,yBAAwBL,IAAK,EAAC;MACpG,IAAI,CAACH,SAAQ,GAAI,IAAI;MACrB,IAAI,CAACS,KAAK,CAACC,GAAG,CAACN,GAAG,EACfO,IAAI,CAAEC,GAAG,IAAK;QACb,IAAI,CAACZ,SAAQ,GAAI,KAAK;QACtB,IAAIY,GAAG,CAAChB,IAAI,CAACiB,OAAO,EAAE;UACpBC,OAAO,CAACC,GAAG,CAACH,GAAG,CAAChB,IAAI,CAAC;UACrB,IAAI,CAACC,QAAO,GAAIe,GAAG,CAAChB,IAAI,CAACC,QAAQ;UACjC,IAAI,CAACC,UAAS,GAAIc,GAAG,CAAChB,IAAI,CAACE,UAAU;QACvC;MACF,CAAC,CAAC;IACN,CAAC;IACDkB,SAASA,CAAA,EAAG;MACV,IAAI,CAACjB,WAAU,GAAI,CAAC,CAAC;MACrB,MAAMkB,gBAAe,GAAI,IAAI,CAACC,KAAK,CAACC,YAAY;MAChDF,gBAAgB,CAACG,SAAS,CAAC,CAAC;IAC9B,CAAC;IACDC,aAAaA,CAACC,IAAI,EAAE;MAClB,IAAI,CAACvB,WAAU,GAAIuB,IAAI;MACvB,MAAMlB,GAAE,GAAK,GAAEC,OAAO,CAACC,GAAG,CAACC,WAAY,OAAMF,OAAO,CAACC,GAAG,CAACE,YAAa,kBAAiB;MACvF,MAAMS,gBAAe,GAAI,IAAI,CAACC,KAAK,CAACC,YAAY;MAChD,IAAI,CAACV,KAAK,CAACc,IAAI,CAACnB,GAAG,EAAE;QAAER,IAAI,EAAE,IAAI,CAACG;MAAY,CAAC,EAC5CY,IAAI,CAAEC,GAAG,IAAK;QACbE,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;QAChBK,gBAAgB,CAACO,SAAS,CAAC,CAAC;QAC5B,IAAI,CAACtB,WAAW,CAAC,CAAC;MACpB,CAAC,CAAC;IACN;EACF,CAAC;EACDuB,OAAOA,CAAA,EAAG;IACR,IAAI,CAACvB,WAAW,CAAC,CAAC;EACpB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}