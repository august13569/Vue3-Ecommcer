{"ast":null,"code":"import Navbar from '@/components/Navbar.vue';\nimport Footer from '@/components/Footer.vue';\nimport ProductList from '@/components/HorizontalProductList.vue';\nimport ToastMessages from '@/components/ToastMessages.vue';\nexport default {\n  components: {\n    Navbar,\n    Footer,\n    ProductList,\n    ToastMessages\n  },\n  data() {\n    return {\n      pageInfo: {\n        title: 'Related',\n        type: '',\n        name: ''\n      },\n      allProducts: [],\n      product: {},\n      id: '',\n      quantity: 1,\n      status: {\n        loadingItem: ''\n      }\n    };\n  },\n  methods: {\n    // 取得所有產品\n    getAllProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      this.$http.get(url).then(res => {\n        this.allProducts = res.data.products;\n        this.isLoading = false;\n      });\n    },\n    // 取得特定產品\n    getProduct() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.id}`;\n      this.isLoading = true;\n      this.$http.get(api).then(res => {\n        if (res.data.success) {\n          this.product = res.data.product;\n          this.pageInfo.type = this.product.category;\n          this.pageInfo.name = this.product.title;\n        }\n        this.isLoading = false;\n      });\n    },\n    // 增減產品數量\n    updateQuantity(action) {\n      if (action === 'plus' && this.quantity < this.product.is_enabled) {\n        this.quantity += 1;\n      } else if (action === 'minus' && this.quantity > 1) {\n        this.quantity -= 1;\n      }\n    },\n    // 加入購物車\n    addToCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.status.loadingItem = id;\n      const cart = {\n        product_id: id,\n        qty: this.quantity\n      };\n      this.$http.post(url, {\n        data: cart\n      }).then(res => {\n        this.updateCartNum();\n        this.$emitter.emit('push-message', {\n          style: 'primary',\n          title: 'The item has added to shopping cart.'\n        });\n        this.status.loadingItem = '';\n      });\n    },\n    // 更新購物車品項數量\n    updateCartNum() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(url).then(res => {\n        const newCartNum = res.data.data.carts;\n        this.$emitter.emit('update-cart', newCartNum);\n      });\n    }\n  },\n  created() {\n    this.id = this.$route.params.productId;\n    this.getAllProducts();\n    this.getProduct();\n    // 監聽路由並更新至相應的頁面\n    this.$watch(() => this.$route.params, (toParams, previousParams) => {\n      this.id = toParams.productId;\n      this.getProduct();\n    });\n  }\n};","map":{"version":3,"names":["Navbar","Footer","ProductList","ToastMessages","components","data","pageInfo","title","type","name","allProducts","product","id","quantity","status","loadingItem","methods","getAllProducts","url","process","env","VUE_APP_API","VUE_APP_PATH","isLoading","$http","get","then","res","products","getProduct","api","success","category","updateQuantity","action","is_enabled","addToCart","cart","product_id","qty","post","updateCartNum","$emitter","emit","style","newCartNum","carts","created","$route","params","productId","$watch","toParams","previousParams"],"sources":["C:\\Users\\augus\\OneDrive\\桌面\\暫存區\\vue-practice\\brite\\src\\views\\front\\TheProduct.vue"],"sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <ToastMessages></ToastMessages>\n  <Navbar></Navbar>\n  <div class=\"container\">\n    <!-- The Product Information -->\n    <div class=\"row\">\n      <div class=\"col-md-6 mb-3\">\n        <img :src=\"product.imageUrl\" alt=\"\" class=\"w-100 h-100\">\n      </div>\n      <div class=\"col-md-6 d-flex flex-column justify-content-center\">\n        <h2 class=\"mb-3\">{{ product.title }}</h2>\n        <ul>\n          <li class=\"mb-1\">Type: {{ product.category }}</li>\n          <li class=\"mb-1\">Available: {{ product.is_enabled }}</li>\n          <li class=\"mb-1\">Color: {{ product.unit }}</li>\n        </ul>\n        <div class=\"d-flex\">\n          <p class=\"text-primary fs-3 px-2\">${{ $filters.currency(product.price) }}</p>\n          <p class=\"text-secondary text-decoration-line-through fs-5 px-2 pt-md-2\"\n             v-if=\"product.price !== product.origin_price\"\n             >\n            ${{ $filters.currency(product.origin_price) }}\n          </p>\n        </div>\n        <span class=\"text-danger\" v-if=\"this.quantity === this.product.is_enabled\">\n          You've reached the maximum quantity available for this item\n        </span>\n        <div class=\"mb-3\">\n          <label for=\"buyqant\">Quantity:</label>\n          <button class=\"btn\" type=\"button\" @click=\"updateQuantity('minus')\">\n            <i class=\"bi bi-dash-circle-fill link-primary fs-4\"></i>\n          </button>\n          <input class=\"q-input\"\n                 type=\"number\"\n                 name=\"buyqant\"\n                 id=\"buyqant\"\n                 value=\"1\"\n                 min=\"1\"\n                 v-model.number=\"quantity\"\n                 >\n          <button class=\"btn\" type=\"button\" @click=\"updateQuantity('plus')\">\n            <i class=\"bi bi-plus-circle-fill link-primary fs-4\"></i>\n          </button>\n        </div>\n        <div class=\"mb-5\">\n          <button type=\"button\" class=\"btn btn-danger position-relative\"\n                  :disabled=\"this.status.loadingItem === product.id\"\n                  @click=\"addToCart(product.id)\"\n                  >\n                  <div class=\"position-absolute top-50 start-50 translate-middle\">\n                    <div class=\"spinner-border spinner-border-sm text-white\"\n                         role=\"status\"\n                         v-if=\"this.status.loadingItem === product.id\"\n                         >\n                    </div>\n                  </div>\n                  <span :class=\"{'text-danger': this.status.loadingItem === product.id}\">\n                    <i class=\"bi bi-cart-fill pe-2\"></i>Add to Cart\n                  </span>\n                  </button>\n        </div>\n      </div>\n      <!-- The Product Introduction -->\n      <div class=\"col-12 mb-5\">\n        <ul class=\"nav nav-underline mb-3\" id=\"pills-tab\" role=\"tablist\">\n          <li class=\"nav-item pe-1\" role=\"presentation\">\n            <button class=\"nav-link fs-5 active\"\n                    id=\"pills-home-tab\"\n                    data-bs-toggle=\"pill\"\n                    data-bs-target=\"#pills-home\"\n                    type=\"button\"\n                    role=\"tab\"\n                    aria-controls=\"pills-home\"\n                    aria-selected=\"true\"\n                    >\n                    Content</button>\n          </li>\n          <li class=\"nav-item px-2\" role=\"presentation\">\n            <button class=\"nav-link fs-5\"\n                    id=\"pills-profile-tab\"\n                    data-bs-toggle=\"pill\"\n                    data-bs-target=\"#pills-profile\"\n                    type=\"button\"\n                    role=\"tab\"\n                    aria-controls=\"pills-profile\"\n                    aria-selected=\"false\"\n                    >\n                    Description</button>\n          </li>\n          <li class=\"nav-item px-2\" role=\"presentation\">\n            <button class=\"nav-link fs-5\"\n                    id=\"pills-contact-tab\"\n                    data-bs-toggle=\"pill\"\n                    data-bs-target=\"#pills-contact\"\n                    type=\"button\"\n                    role=\"tab\"\n                    aria-controls=\"pills-contact\"\n                    aria-selected=\"false\"\n                    >\n                    Information</button>\n          </li>\n        </ul>\n        <div class=\"tab-content\" id=\"pills-tabContent\">\n          <div class=\"tab-pane fade show active\"\n               id=\"pills-home\"\n               role=\"tabpanel\"\n               aria-labelledby=\"pills-home-tab\"\n               tabindex=\"0\"\n               >\n               {{ product.content }}\n                </div>\n          <div class=\"tab-pane fade\"\n               id=\"pills-profile\"\n               role=\"tabpanel\"\n               aria-labelledby=\"pills-profile-tab\"\n               tabindex=\"0\"\n               >\n               {{ product.description }}\n                </div>\n          <div class=\"tab-pane fade\"\n               id=\"pills-contact\"\n               role=\"tabpanel\"\n               aria-labelledby=\"pills-contact-tab\"\n               tabindex=\"0\"\n               >\n               We offer warranty and return services\n               to ensure a hassle-free shopping experience for you.\n               All products come with a warranty period,\n               which varies depending on the type of product.\n               Please refer to the individual product pages for detailed information.\n               If you are unsatisfied with your purchase or need to initiate a return,\n               please contact us within a specified period after purchase.\n               We are committed to providing you with return and refund services promptly.\n               For detailed return policies, please refer to our website\n               or contact our customer service department.\n               We strive to ensure your shopping satisfaction\n               and provide the best possible post-sales support.\n                </div>\n        </div>\n      </div>\n      <!-- Related Products -->\n      <section>\n      <ProductList :allProducts=\"allProducts\" :status=\"pageInfo\"></ProductList>\n      </section>\n    </div>\n  </div>\n  <Footer></Footer>\n</template>\n\n<script>\nimport Navbar from '@/components/Navbar.vue';\nimport Footer from '@/components/Footer.vue';\nimport ProductList from '@/components/HorizontalProductList.vue';\nimport ToastMessages from '@/components/ToastMessages.vue';\n\nexport default {\n  components: {\n    Navbar,\n    Footer,\n    ProductList,\n    ToastMessages,\n  },\n  data() {\n    return {\n      pageInfo: {\n        title: 'Related',\n        type: '',\n        name: '',\n      },\n      allProducts: [],\n      product: {},\n      id: '',\n      quantity: 1,\n      status: {\n        loadingItem: '',\n      },\n    };\n  },\n  methods: {\n    // 取得所有產品\n    getAllProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      this.$http.get(url)\n        .then((res) => {\n          this.allProducts = res.data.products;\n          this.isLoading = false;\n        });\n    },\n    // 取得特定產品\n    getProduct() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.id}`;\n      this.isLoading = true;\n      this.$http.get(api).then((res) => {\n        if (res.data.success) {\n          this.product = res.data.product;\n          this.pageInfo.type = this.product.category;\n          this.pageInfo.name = this.product.title;\n        }\n        this.isLoading = false;\n      });\n    },\n    // 增減產品數量\n    updateQuantity(action) {\n      if (action === 'plus' && this.quantity < this.product.is_enabled) {\n        this.quantity += 1;\n      } else if (action === 'minus' && this.quantity > 1) {\n        this.quantity -= 1;\n      }\n    },\n    // 加入購物車\n    addToCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.status.loadingItem = id;\n      const cart = {\n        product_id: id,\n        qty: this.quantity,\n      };\n      this.$http.post(url, { data: cart })\n        .then((res) => {\n          this.updateCartNum();\n          this.$emitter.emit('push-message', {\n            style: 'primary',\n            title: 'The item has added to shopping cart.',\n          });\n          this.status.loadingItem = '';\n        });\n    },\n    // 更新購物車品項數量\n    updateCartNum() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(url).then((res) => {\n        const newCartNum = res.data.data.carts;\n        this.$emitter.emit('update-cart', newCartNum);\n      });\n    },\n  },\n  created() {\n    this.id = this.$route.params.productId;\n    this.getAllProducts();\n    this.getProduct();\n    // 監聽路由並更新至相應的頁面\n    this.$watch(\n      () => this.$route.params,\n      (toParams, previousParams) => {\n        this.id = toParams.productId;\n        this.getProduct();\n      },\n    );\n  },\n};\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}