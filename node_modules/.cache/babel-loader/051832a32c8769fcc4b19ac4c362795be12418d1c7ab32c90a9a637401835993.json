{"ast":null,"code":"export default {\n  data() {\n    return {\n      carts: [],\n      isSidebarOpen: false\n    };\n  },\n  methods: {\n    // 取得購物車資訊\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(url).then(res => {\n        this.carts = res.data.data.carts;\n      });\n    },\n    // 監聽Sidebar是否開啟並傳送給父層\n    observeSidebar() {\n      const observerInstance = new MutationObserver(mutationsList => {\n        mutationsList.forEach(mutation => {\n          if (mutation.target.getAttribute('role') === 'dialog') {\n            this.isSidebarOpen = true;\n            this.$emit('sidebar-status', true);\n          } else {\n            this.isSidebarOpen = false;\n            this.$emit('sidebar-status', false);\n          }\n        });\n      });\n      observerInstance.observe(document.getElementById('offcanvasNavbar'), {\n        attributes: true,\n        attributeFilter: ['role']\n      });\n    }\n  },\n  computed: {\n    // 顯示購物車品項數量\n    cartNum() {\n      return this.carts.length;\n    }\n  },\n  // 接收由外層傳來的購物車數量\n  mounted() {\n    this.$emitter.on('update-cart', newCartNum => {\n      this.carts = newCartNum;\n    });\n    this.observeSidebar();\n  },\n  created() {\n    this.getCart();\n  }\n};","map":{"version":3,"names":["data","carts","isSidebarOpen","methods","getCart","url","process","env","VUE_APP_API","VUE_APP_PATH","$http","get","then","res","observeSidebar","observerInstance","MutationObserver","mutationsList","forEach","mutation","target","getAttribute","$emit","observe","document","getElementById","attributes","attributeFilter","computed","cartNum","length","mounted","$emitter","on","newCartNum","created"],"sources":["C:\\Users\\augus\\OneDrive\\桌面\\暫存區\\vue-practice\\brite\\src\\components\\FrontNavbar.vue"],"sourcesContent":["<template>\n  <!-- Navbar -->\n  <nav class=\"navbar navbar-expand-lg sticky-top bg-white shadow\">\n    <div class=\"container\">\n      <!-- Toggle Button -->\n      <button class=\"navbar-toggler\"\n              type=\"button\"\n              data-bs-toggle=\"offcanvas\"\n              data-bs-target=\"#offcanvasNavbar\"\n              aria-controls=\"offcanvasNavbar\"\n              >\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n      <!-- Logo -->\n      <router-link to=\"/\" class=\"navbar-brand\">\n        <h1 class=\"visually-hidden\">BRITE</h1>\n        <img class=\"logo\" src=\"~@/assets/img/BRITE Logo.png\" alt=\"BRITE\">\n      </router-link>\n      <!-- Sidebar -->\n      <div class=\"offcanvas offcanvas-start\"\n           tabindex=\"-1\"\n           id=\"offcanvasNavbar\"\n           aria-labelledby=\"offcanvasNavbarLabel\"\n           data-bs-dismiss=\"offcanvas\"\n           >\n        <!-- Sidebar Header -->\n        <div class=\"offcanvas-header d-flex justify-content-end d-lg-none\">\n          <button class=\"btn-close text-reset\"\n                  type=\"button\"\n                  data-bs-dismiss=\"offcanvas\"\n                  aria-label=\"Close\"></button>\n        </div>\n        <!-- Sidebar Body -->\n        <div class=\"offcanvas-body\">\n          <ul class=\"navbar-nav justify-content-center flex-grow-1 pe-3\">\n            <li class=\"nav-item px-2\">\n              <router-link to=\"/about\" class=\"nav-link link-secondary\">About</router-link>\n            </li>\n            <li class=\"nav-item px-2\">\n              <router-link to=\"/products\" class=\"nav-link link-secondary\">Products</router-link>\n            </li>\n            <li class=\"nav-item px-2\">\n              <router-link to=\"/faq\" class=\"nav-link link-secondary\">FAQ</router-link>\n            </li>\n            <li class=\"nav-item px-2\">\n              <router-link to=\"/contact\" class=\"nav-link link-secondary\">Contact</router-link>\n            </li>\n          </ul>\n        </div>\n      </div>\n      <!-- Login & Shopping Cart -->\n      <div class=\"d-flex\">\n        <router-link to=\"/login\" class=\"fs-3 px-1\">\n          <i class=\"bi bi-person-fill text-secondary\"></i>\n        </router-link>\n        <div class=\"position-relative align-self-center\">\n          <router-link to=\"/cart\" class=\"fs-5 px-1\">\n            <i class=\"bi bi-bag-fill text-secondary\"></i>\n          </router-link>\n          <span class=\"position-absolute top-0 start-100 translate-middle\n                       badge rounded-pill bg-danger\"\n                v-if=\"carts.length > 0\"\n                       >\n                       {{ cartNum }}\n            <span class=\"visually-hidden\">unread messages</span>\n          </span>\n        </div>\n      </div>\n    </div>\n  </nav>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      carts: [],\n      isSidebarOpen: false,\n    };\n  },\n  methods: {\n    // 取得購物車資訊\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(url).then((res) => {\n        this.carts = res.data.data.carts;\n      });\n    },\n    // 監聽Sidebar是否開啟並傳送給父層\n    observeSidebar() {\n      const observerInstance = new MutationObserver((mutationsList) => {\n        mutationsList.forEach((mutation) => {\n          if (mutation.target.getAttribute('role') === 'dialog') {\n            this.isSidebarOpen = true;\n            this.$emit('sidebar-status', true);\n          } else {\n            this.isSidebarOpen = false;\n            this.$emit('sidebar-status', false);\n          }\n        });\n      });\n      observerInstance.observe(document.getElementById('offcanvasNavbar'), {\n        attributes: true,\n        attributeFilter: ['role'],\n      });\n    },\n  },\n  computed: {\n    // 顯示購物車品項數量\n    cartNum() {\n      return this.carts.length;\n    },\n  },\n  // 接收由外層傳來的購物車數量\n  mounted() {\n    this.$emitter.on('update-cart', (newCartNum) => {\n      this.carts = newCartNum;\n    });\n    this.observeSidebar();\n  },\n  created() {\n    this.getCart();\n  },\n};\n</script>\n"],"mappings":"AAyEA,eAAe;EACbA,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,aAAa,EAAE;IACjB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP;IACAC,OAAOA,CAAA,EAAG;MACR,MAAMC,GAAE,GAAK,GAAEC,OAAO,CAACC,GAAG,CAACC,WAAY,OAAMF,OAAO,CAACC,GAAG,CAACE,YAAa,OAAM;MAC5E,IAAI,CAACC,KAAK,CAACC,GAAG,CAACN,GAAG,CAAC,CAACO,IAAI,CAAEC,GAAG,IAAK;QAChC,IAAI,CAACZ,KAAI,GAAIY,GAAG,CAACb,IAAI,CAACA,IAAI,CAACC,KAAK;MAClC,CAAC,CAAC;IACJ,CAAC;IACD;IACAa,cAAcA,CAAA,EAAG;MACf,MAAMC,gBAAe,GAAI,IAAIC,gBAAgB,CAAEC,aAAa,IAAK;QAC/DA,aAAa,CAACC,OAAO,CAAEC,QAAQ,IAAK;UAClC,IAAIA,QAAQ,CAACC,MAAM,CAACC,YAAY,CAAC,MAAM,MAAM,QAAQ,EAAE;YACrD,IAAI,CAACnB,aAAY,GAAI,IAAI;YACzB,IAAI,CAACoB,KAAK,CAAC,gBAAgB,EAAE,IAAI,CAAC;UACpC,OAAO;YACL,IAAI,CAACpB,aAAY,GAAI,KAAK;YAC1B,IAAI,CAACoB,KAAK,CAAC,gBAAgB,EAAE,KAAK,CAAC;UACrC;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;MACFP,gBAAgB,CAACQ,OAAO,CAACC,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC,EAAE;QACnEC,UAAU,EAAE,IAAI;QAChBC,eAAe,EAAE,CAAC,MAAM;MAC1B,CAAC,CAAC;IACJ;EACF,CAAC;EACDC,QAAQ,EAAE;IACR;IACAC,OAAOA,CAAA,EAAG;MACR,OAAO,IAAI,CAAC5B,KAAK,CAAC6B,MAAM;IAC1B;EACF,CAAC;EACD;EACAC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,QAAQ,CAACC,EAAE,CAAC,aAAa,EAAGC,UAAU,IAAK;MAC9C,IAAI,CAACjC,KAAI,GAAIiC,UAAU;IACzB,CAAC,CAAC;IACF,IAAI,CAACpB,cAAc,CAAC,CAAC;EACvB,CAAC;EACDqB,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC/B,OAAO,CAAC,CAAC;EAChB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}