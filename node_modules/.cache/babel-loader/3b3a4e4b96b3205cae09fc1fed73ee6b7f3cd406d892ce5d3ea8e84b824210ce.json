{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport FrontNavbar from '@/components/FrontNavbar.vue';\nimport FrontFooter from '@/components/FrontFooter.vue';\nexport default {\n  components: {\n    FrontNavbar,\n    FrontFooter\n  },\n  data() {\n    return {\n      isLoading: false,\n      allProducts: [],\n      products: [],\n      productsCategory: {},\n      selectedTitle: 'All',\n      isSidebarOpen: false\n    };\n  },\n  methods: {\n    // 取得所有產品\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      this.$http.get(url).then(res => {\n        this.products = res.data.products;\n        this.allProducts = [...this.products];\n        this.sumProductsCategory();\n        if (this.$route.query.data) {\n          this.selectedCategory(this.$route.query.data);\n        }\n        this.isLoading = false;\n      });\n    },\n    // 透過路由，進入被點擊的產品頁面\n    intoProduct(id) {\n      this.$router.push(`/products/${id}`);\n    },\n    // 匯集產品總類\n    sumProductsCategory() {\n      this.productsCategory = this.products.reduce((acc, product) => {\n        acc[product.category] = (acc[product.category] || 0) + 1;\n        return acc;\n      }, {\n        All: 0\n      });\n      const total = Object.values(this.productsCategory).reduce((sum, count) => sum + count, 0);\n      this.productsCategory.All = total;\n    },\n    // 選取產品類別\n    selectedCategory(category) {\n      this.selectedTitle = `${category}`;\n      if (category === 'All') {\n        this.products = [...this.allProducts];\n      } else {\n        this.products = this.allProducts.filter(product => product.category === category);\n      }\n    },\n    // 監聽Sidebar動態來隱藏目錄覽，避免目錄擋住Sidebar\n    handleSidebarStatus(status) {\n      this.isSidebarOpen = status;\n    }\n  },\n  created() {\n    this.getProducts();\n  }\n};","map":{"version":3,"names":["FrontNavbar","FrontFooter","components","data","isLoading","allProducts","products","productsCategory","selectedTitle","isSidebarOpen","methods","getProducts","url","process","env","VUE_APP_API","VUE_APP_PATH","$http","get","then","res","sumProductsCategory","$route","query","selectedCategory","intoProduct","id","$router","push","reduce","acc","product","category","All","total","Object","values","sum","count","filter","handleSidebarStatus","status","created"],"sources":["C:\\Users\\augus\\OneDrive\\桌面\\暫存區\\vue-practice\\brite\\src\\views\\front\\Products.vue"],"sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <FrontNavbar @sidebar-status=\"handleSidebarStatus\"></FrontNavbar>\n  <!-- Banner -->\n  <header class=\"header-2 d-flex align-items-center justify-content-center mb-5\">\n    <div class=\"text-white text-center w-100\"\n         style=\"background-image: radial-gradient(circle, rgba(0, 0, 0, 0.5) 0%,\n                                rgba(0, 0, 0, 0) 100%);\">\n      <h2 class=\"display-1\">Products</h2>\n    </div>\n  </header>\n  <!-- Title -->\n  <div class=\"container\">\n    <h2 class=\"display-3\">\n        {{ selectedTitle === 'All' ? selectedTitle + ' Products' : selectedTitle + ' Lamps'}}\n    </h2>\n  </div>\n  <!-- Category -->\n  <!-- Show on phone -->\n  <div class=\"sticky-top\" style=\"top: 100px;\" v-show=\"!isSidebarOpen\">\n    <div class=\"container mb-3\">\n      <div class=\"position-relative d-md-none\">\n          <div class=\"d-flex overflow-auto n-sbar\">\n            <span class=\"badge rounded-pill mx-1 p-2\"\n                 :class=\"selectedTitle === key ? 'bg-primary' : 'bg-secondary'\"\n                  v-for=\"(value, key) in productsCategory\" :key=\"key\"\n                  @click.prevent=selectedCategory(key)\n                  >\n              <a class=\"link-light n-line\" href=\"#\">\n                {{ key === 'All' ? key + ' Products' : key + ' Lamps'}} ({{ value }})\n              </a>\n            </span>\n          </div>\n        </div>\n    </div>\n  </div>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-md-3\">\n        <!-- Show on Tab or Above -->\n        <div class=\"sticky-top\" style=\"top: 140px;\" v-show=\"!isSidebarOpen\">\n          <div class=\"list-group d-none d-md-block\">\n            <a href=\"#\" class=\"list-group-item list-group-item-action\"\n               :class=\"{'active': selectedTitle === key}\"\n               v-for=\"(value, key) in productsCategory\" :key=\"key\"\n               @click.prevent=selectedCategory(key)\n               >\n               {{ key === 'All' ? key + ' Products' : key + ' Lamps'}} ({{ value }})\n            </a>\n          </div>\n        </div>\n      </div>\n      <!-- Product List -->\n      <div class=\"col-md-9\">\n        <div class=\"d-flex flex-wrap\">\n          <div class=\"card border border-white h-border mx-auto m-ss-1\"\n               style=\"width: 14rem;\"\n               v-for=\"item in products\" :key=\"item.id\"\n               >\n            <a class=\"n-line\" href=\"#\" @click.prevent=\"intoProduct(item.id)\">\n              <img :src=\"`${item.imageUrl}`\" class=\"card-img-top\" :alt=\"`${item.title}`\">\n              <div class=\"card-body\">\n                <h5 class=\"card-title text-dark\">{{ item.title }}</h5>\n                <p class=\"card-text text-secondary\">{{ item.category }}</p>\n                <div class=\"d-flex justify-content-between\">\n                  <p class=\"card-text text-primary fs-4\">${{ $filters.currency(item.price) }}</p>\n                  <p class=\"card-text text-secondary text-decoration-line-through pt-1\"\n                     v-if=\"item.price !== item.origin_price\"\n                     >\n                    ${{ $filters.currency(item.origin_price) }}\n                  </p>\n                </div>\n              </div>\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <FrontFooter />\n</template>\n\n<script>\nimport FrontNavbar from '@/components/FrontNavbar.vue';\nimport FrontFooter from '@/components/FrontFooter.vue';\n\nexport default {\n  components: {\n    FrontNavbar,\n    FrontFooter,\n  },\n  data() {\n    return {\n      isLoading: false,\n      allProducts: [],\n      products: [],\n      productsCategory: {},\n      selectedTitle: 'All',\n      isSidebarOpen: false,\n    };\n  },\n  methods: {\n    // 取得所有產品\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      this.$http.get(url)\n        .then((res) => {\n          this.products = res.data.products;\n          this.allProducts = [...this.products];\n          this.sumProductsCategory();\n          if (this.$route.query.data) {\n            this.selectedCategory(this.$route.query.data);\n          }\n          this.isLoading = false;\n        });\n    },\n    // 透過路由，進入被點擊的產品頁面\n    intoProduct(id) {\n      this.$router.push(`/products/${id}`);\n    },\n    // 匯集產品總類\n    sumProductsCategory() {\n      this.productsCategory = this.products.reduce((acc, product) => {\n        acc[product.category] = (acc[product.category] || 0) + 1;\n        return acc;\n      }, { All: 0 });\n      const total = Object.values(this.productsCategory).reduce((sum, count) => sum + count, 0);\n      this.productsCategory.All = total;\n    },\n    // 選取產品類別\n    selectedCategory(category) {\n      this.selectedTitle = `${category}`;\n      if (category === 'All') {\n        this.products = [...this.allProducts];\n      } else {\n        this.products = this.allProducts.filter((product) => product.category === category);\n      }\n    },\n    // 監聽Sidebar動態來隱藏目錄覽，避免目錄擋住Sidebar\n    handleSidebarStatus(status) {\n      this.isSidebarOpen = status;\n    },\n  },\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n"],"mappings":";AAmFA,OAAOA,WAAU,MAAO,8BAA8B;AACtD,OAAOC,WAAU,MAAO,8BAA8B;AAEtD,eAAe;EACbC,UAAU,EAAE;IACVF,WAAW;IACXC;EACF,CAAC;EACDE,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,KAAK;MAChBC,WAAW,EAAE,EAAE;MACfC,QAAQ,EAAE,EAAE;MACZC,gBAAgB,EAAE,CAAC,CAAC;MACpBC,aAAa,EAAE,KAAK;MACpBC,aAAa,EAAE;IACjB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP;IACAC,WAAWA,CAAA,EAAG;MACZ,MAAMC,GAAE,GAAK,GAAEC,OAAO,CAACC,GAAG,CAACC,WAAY,OAAMF,OAAO,CAACC,GAAG,CAACE,YAAa,eAAc;MACpF,IAAI,CAACZ,SAAQ,GAAI,IAAI;MACrB,IAAI,CAACa,KAAK,CAACC,GAAG,CAACN,GAAG,EACfO,IAAI,CAAEC,GAAG,IAAK;QACb,IAAI,CAACd,QAAO,GAAIc,GAAG,CAACjB,IAAI,CAACG,QAAQ;QACjC,IAAI,CAACD,WAAU,GAAI,CAAC,GAAG,IAAI,CAACC,QAAQ,CAAC;QACrC,IAAI,CAACe,mBAAmB,CAAC,CAAC;QAC1B,IAAI,IAAI,CAACC,MAAM,CAACC,KAAK,CAACpB,IAAI,EAAE;UAC1B,IAAI,CAACqB,gBAAgB,CAAC,IAAI,CAACF,MAAM,CAACC,KAAK,CAACpB,IAAI,CAAC;QAC/C;QACA,IAAI,CAACC,SAAQ,GAAI,KAAK;MACxB,CAAC,CAAC;IACN,CAAC;IACD;IACAqB,WAAWA,CAACC,EAAE,EAAE;MACd,IAAI,CAACC,OAAO,CAACC,IAAI,CAAE,aAAYF,EAAG,EAAC,CAAC;IACtC,CAAC;IACD;IACAL,mBAAmBA,CAAA,EAAG;MACpB,IAAI,CAACd,gBAAe,GAAI,IAAI,CAACD,QAAQ,CAACuB,MAAM,CAAC,CAACC,GAAG,EAAEC,OAAO,KAAK;QAC7DD,GAAG,CAACC,OAAO,CAACC,QAAQ,IAAI,CAACF,GAAG,CAACC,OAAO,CAACC,QAAQ,KAAK,CAAC,IAAI,CAAC;QACxD,OAAOF,GAAG;MACZ,CAAC,EAAE;QAAEG,GAAG,EAAE;MAAE,CAAC,CAAC;MACd,MAAMC,KAAI,GAAIC,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC7B,gBAAgB,CAAC,CAACsB,MAAM,CAAC,CAACQ,GAAG,EAAEC,KAAK,KAAKD,GAAE,GAAIC,KAAK,EAAE,CAAC,CAAC;MACzF,IAAI,CAAC/B,gBAAgB,CAAC0B,GAAE,GAAIC,KAAK;IACnC,CAAC;IACD;IACAV,gBAAgBA,CAACQ,QAAQ,EAAE;MACzB,IAAI,CAACxB,aAAY,GAAK,GAAEwB,QAAS,EAAC;MAClC,IAAIA,QAAO,KAAM,KAAK,EAAE;QACtB,IAAI,CAAC1B,QAAO,GAAI,CAAC,GAAG,IAAI,CAACD,WAAW,CAAC;MACvC,OAAO;QACL,IAAI,CAACC,QAAO,GAAI,IAAI,CAACD,WAAW,CAACkC,MAAM,CAAER,OAAO,IAAKA,OAAO,CAACC,QAAO,KAAMA,QAAQ,CAAC;MACrF;IACF,CAAC;IACD;IACAQ,mBAAmBA,CAACC,MAAM,EAAE;MAC1B,IAAI,CAAChC,aAAY,GAAIgC,MAAM;IAC7B;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC/B,WAAW,CAAC,CAAC;EACpB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}