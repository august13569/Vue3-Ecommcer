{"ast":null,"code":"import Navbar from '@/components/Navbar.vue';\nimport Footer from '@/components/Footer.vue';\nimport Stepsbar from '@/components/StepsBar.vue';\nexport default {\n  components: {\n    Navbar,\n    Footer,\n    Stepsbar\n  },\n  data() {\n    return {\n      stepsTitle: 'Checkout',\n      order: {\n        user: {}\n      },\n      orderId: '',\n      isLoading: false\n    };\n  },\n  methods: {\n    // 取得訂單資訊\n    getOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${this.orderId}`;\n      this.$http.get(url).then(res => {\n        if (res.data.success) {\n          this.order = res.data.order;\n          console.log(this.order);\n        }\n      });\n    },\n    // 確認支付訂單\n    payOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${this.orderId}`;\n      this.$http.post(url).then(res => {\n        console.log(res);\n        if (res.data.success) {\n          this.getOrder();\n        }\n      });\n    }\n  },\n  created() {\n    // 從路由參數中取得訂單ID\n    this.orderId = this.$route.params.orderId;\n    console.log(this.orderId);\n    this.getOrder();\n  }\n};","map":{"version":3,"names":["Navbar","Footer","Stepsbar","components","data","stepsTitle","order","user","orderId","isLoading","methods","getOrder","url","process","env","VUE_APP_API","VUE_APP_PATH","$http","get","then","res","success","console","log","payOrder","post","created","$route","params"],"sources":["C:\\Users\\augus\\OneDrive\\桌面\\暫存區\\vue-practice\\brite\\src\\views\\front\\CheckOut.vue"],"sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <Navbar></Navbar>\n  <Stepsbar class=\"my-4\" :title=\"stepsTitle\" v-if=\"!order.is_paid\"></Stepsbar>\n  <div class=\"container\">\n    <!-- Order Info -->\n    <div class=\"my-5 row justify-content-center\" style=\"min-height: 75vh\">\n      <form class=\"col-md-6\" @submit.prevent=\"payOrder\" v-if=\"!order.is_paid\">\n        <table class=\"table align-middle text-center\">\n          <thead>\n          <th>Product</th>\n          <th>Quantity</th>\n          <th>Color</th>\n          <th>Price</th>\n          </thead>\n          <tbody>\n          <tr v-for=\"item in order.products\" :key=\"item.id\">\n            <td>{{ item.product.title }}</td>\n            <td>{{ item.qty }}</td>\n            <td>{{ item.product.unit }}</td>\n            <td>{{ item.final_total }}</td>\n          </tr>\n          </tbody>\n          <tfoot>\n          <tr>\n            <td colspan=\"2\"></td>\n            <td class=\"text-primary\">Total</td>\n            <td class=\"text-primary\">{{ order.total }}</td>\n          </tr>\n          </tfoot>\n        </table>\n        <table class=\"table\">\n          <tbody>\n          <tr>\n            <th width=\"100\">Email</th>\n            <td>{{ order.user.email }}</td>\n          </tr>\n          <tr>\n            <th>Name</th>\n            <td>{{ order.user.name }}</td>\n          </tr>\n          <tr>\n            <th>Phone</th>\n            <td>{{ order.user.tel }}</td>\n          </tr>\n          <tr>\n            <th>Address</th>\n            <td>{{ order.user.address }}</td>\n          </tr>\n          <tr>\n            <th>Note</th>\n            <td>{{ order.message }}</td>\n          </tr>\n          <tr>\n            <th>Statement</th>\n            <td>\n              <span class=\"text-danger\" v-if=\"!order.is_paid\">Unpay</span>\n              <span class=\"text-primary\" v-else>Paied</span>\n            </td>\n          </tr>\n          </tbody>\n        </table>\n        <div class=\"text-end\" v-if=\"order.is_paid === false\">\n          <button class=\"btn btn-danger\">Confirm</button>\n        </div>\n      </form>\n      <!-- Paied Order -->\n      <div class=\"col text-center\" v-else>\n        <img class=\"img-fluid mb-3\" src=\"~@/assets/img/Thank You.jpg\" alt=\"Thank You\">\n        <p class=\"mb-0\">Order Number: <span class=\"text-primary\">{{ orderId }}</span></p>\n        <span class=\"badge rounded-pill bg-primary px-3 py-2 mb-3\">Paied</span>\n        <p class=\"fs-5 mb-1\">Thank you for your purchase</p>\n        <p class=\"fs-5\">There are more products are available for you</p>\n        <router-link to=\"/products\" role=\"button\"\n                     class=\"btn btn-primary btn-lg text-white mb-5\">\n                     Let's find out\n        </router-link>\n      </div>\n    </div>\n  </div>\n  <Footer></Footer>\n</template>\n\n<script>\nimport Navbar from '@/components/Navbar.vue';\nimport Footer from '@/components/Footer.vue';\nimport Stepsbar from '@/components/StepsBar.vue';\n\nexport default {\n  components: {\n    Navbar,\n    Footer,\n    Stepsbar,\n  },\n  data() {\n    return {\n      stepsTitle: 'Checkout',\n      order: {\n        user: {},\n      },\n      orderId: '',\n      isLoading: false,\n    };\n  },\n  methods: {\n    // 取得訂單資訊\n    getOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${this.orderId}`;\n      this.$http.get(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.order = res.data.order;\n            console.log(this.order);\n          }\n        });\n    },\n    // 確認支付訂單\n    payOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${this.orderId}`;\n      this.$http.post(url)\n        .then((res) => {\n          console.log(res);\n          if (res.data.success) {\n            this.getOrder();\n          }\n        });\n    },\n  },\n  created() {\n    // 從路由參數中取得訂單ID\n    this.orderId = this.$route.params.orderId;\n    console.log(this.orderId);\n    this.getOrder();\n  },\n};\n</script>\n"],"mappings":"AAoFA,OAAOA,MAAK,MAAO,yBAAyB;AAC5C,OAAOC,MAAK,MAAO,yBAAyB;AAC5C,OAAOC,QAAO,MAAO,2BAA2B;AAEhD,eAAe;EACbC,UAAU,EAAE;IACVH,MAAM;IACNC,MAAM;IACNC;EACF,CAAC;EACDE,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,UAAU,EAAE,UAAU;MACtBC,KAAK,EAAE;QACLC,IAAI,EAAE,CAAC;MACT,CAAC;MACDC,OAAO,EAAE,EAAE;MACXC,SAAS,EAAE;IACb,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP;IACAC,QAAQA,CAAA,EAAG;MACT,MAAMC,GAAE,GAAK,GAAEC,OAAO,CAACC,GAAG,CAACC,WAAY,OAAMF,OAAO,CAACC,GAAG,CAACE,YAAa,UAAS,IAAI,CAACR,OAAQ,EAAC;MAC7F,IAAI,CAACS,KAAK,CAACC,GAAG,CAACN,GAAG,EACfO,IAAI,CAAEC,GAAG,IAAK;QACb,IAAIA,GAAG,CAAChB,IAAI,CAACiB,OAAO,EAAE;UACpB,IAAI,CAACf,KAAI,GAAIc,GAAG,CAAChB,IAAI,CAACE,KAAK;UAC3BgB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACjB,KAAK,CAAC;QACzB;MACF,CAAC,CAAC;IACN,CAAC;IACD;IACAkB,QAAQA,CAAA,EAAG;MACT,MAAMZ,GAAE,GAAK,GAAEC,OAAO,CAACC,GAAG,CAACC,WAAY,OAAMF,OAAO,CAACC,GAAG,CAACE,YAAa,QAAO,IAAI,CAACR,OAAQ,EAAC;MAC3F,IAAI,CAACS,KAAK,CAACQ,IAAI,CAACb,GAAG,EAChBO,IAAI,CAAEC,GAAG,IAAK;QACbE,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;QAChB,IAAIA,GAAG,CAAChB,IAAI,CAACiB,OAAO,EAAE;UACpB,IAAI,CAACV,QAAQ,CAAC,CAAC;QACjB;MACF,CAAC,CAAC;IACN;EACF,CAAC;EACDe,OAAOA,CAAA,EAAG;IACR;IACA,IAAI,CAAClB,OAAM,GAAI,IAAI,CAACmB,MAAM,CAACC,MAAM,CAACpB,OAAO;IACzCc,OAAO,CAACC,GAAG,CAAC,IAAI,CAACf,OAAO,CAAC;IACzB,IAAI,CAACG,QAAQ,CAAC,CAAC;EACjB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}